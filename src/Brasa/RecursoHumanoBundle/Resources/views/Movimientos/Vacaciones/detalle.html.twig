{% extends '::base.html.twig' %}
{% block title %}Vacación detalle - Soga App{% endblock %}
{% block content %}
    <div class="container">
        <div class="page-header">
            <h3>Detalles de las vacaciones</h3>
        </div>

        {{ form_start(form, { 'attr': {'class': 'form-horizontal', 'novalidate': 'novalidate'} }) }}
        {{ form_errors(form) }}
        <div class="btn-toolbar" style="float:left">
            <div class="btn-group">                
                {{ form_widget(form.BtnAutorizar, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}
                {{ form_widget(form.BtnDesAutorizar, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}
                {{ form_widget(form.BtnLiquidar, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}                                                    
                {{ form_widget(form.BtnImprimir, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}
                {{ form_widget(form.BtnGenerarPago, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}                                                    
            </div>
        </div>
        <br /><br />
        <div class="panel panel-default">
            <div class="panel-heading">Información de las vacaciones</div>
            <div class="panel-body">    
                <table widtd="100%" class="table table-condensed table-bordered">
                    <tr>
                        <td class="titulo">CODIGO:</td>
                        <td class="td-in-well">{{ arVacaciones.codigoVacacionPk }}</td>
                        <td class="titulo">FECHA:</td>
                        <td class="td-in-well">{{ arVacaciones.fecha |date("Y/m/d") }}</td>
                        <td class="titulo">SALARIO ACTUAL:</td>
                        <td class="td-in-well" align="right">{{ arVacaciones.vrSalarioActual | number_format(0, '.', ',')}}</td>                        
                    </tr>
                    <tr>
                        <td class="titulo">EMPLEADO:</td>
                        <td class="td-in-well">{{ arVacaciones.empleadoRel.nombreCorto }}</td>
                        <td class="titulo">IDENTIFICACIÓN:</td>
                        <td class="td-in-well">{{ arVacaciones.empleadoRel.numeroIdentificacion }}</td>
                        <td class="titulo">SALARIO PROMEDIO:</td>
                        <td class="td-in-well" align="right">{{ arVacaciones.vrSalarioPromedio | number_format(0, '.', ',')}}</td>                                                
                    </tr>                    
                    <tr>
                        <td class="titulo">PERIODO DESDE</td>
                        <td class="td-in-well">{{ arVacaciones.fechaDesdePeriodo |date("Y/m/d") }}</td>
                        <td class="titulo">DÍAS VACACIONES</td>
                        <td class="td-in-well">{{ arVacaciones.diasVacaciones }}</td>
                        <td class="titulo">PROM. RECARGO NOCTURNO:</td>
                        <td class="td-label" align="right">{{ arVacaciones.vrPromedioRecargoNocturno | number_format(0, '.', ',')}}</td>
                    </tr>
                    <tr>
                        <td class="titulo">PERIODO HASTA</td>
                        <td class="td-in-well">{{ arVacaciones.fechaHastaPeriodo |date("Y/m/d") }}</td>
                        <td class="titulo">DÍAS PAGADOS</td>
                        <td class="td-in-well">{{ arVacaciones.diasPagados }}</td>
                        <td class="titulo">VR. SALUD</td>
                        <td class="td-label" align="right">{{ arVacaciones.vrSalud | number_format(0, '.', ',')}}</td>
                    </tr>
                    <tr>
                        <td class="titulo">DISFRUTE DESDE</td>
                        <td class="td-in-well">{{ arVacaciones.fechaDesdeDisfrute |date("Y/m/d") }}</td>
                        <td class="titulo">DÍAS DISFRUTADOS</td>
                        <td class="td-in-well">{{ arVacaciones.diasDisfrutados }}</td>
                        <td class="titulo">VR. PENSIÓN</td>
                        <td class="td-label" align="right">{{ arVacaciones.vrPension | number_format(0, '.', ',')}}</td>                                                
                    </tr>
                    <tr>
                        <td class="titulo">DISFRUTE HASTA</td>
                        <td class="td-in-well">{{ arVacaciones.fechaHastaDisfrute |date("Y/m/d") }}</td>
                        <td class="titulo">USUARIO</td>
                        <td class="td-in-well">{{ arVacaciones.codigoUsuario }}</td>
                        <td class="titulo">TOTAL VACACIONES:</td>
                        <td class="td-in-well" align="right">{{ arVacaciones.vrVacacionBruto | number_format(0, '.', ',')}}</td>                                               
                    </tr>
                    <tr>
                        <td class="titulo">CENTRO COSTO</td>
                        <td class="td-in-well">{{ arVacaciones.centroCostoRel.nombre }}</td>
                        <td class="titulo">PAGADO:</td>
                        <td> {% if arVacaciones.estadoPagado == 1 %}SI{% else %} NO {% endif %}</td>
                        <td class="titulo">OTRAS DEDUCCIONES:</td>
                        <td class="td-in-well" align="right">{{ arVacaciones.vrDeduccion | number_format(0, '.', ',')}}</td>                                               
                    </tr> 
                    <tr>
                        <td class="titulo"></td>
                        <td class="td-in-well"></td>
                        <td class="titulo"></td>
                        <td></td>
                        <td class="titulo">BONIFICACIONES:</td>
                        <td class="td-in-well" align="right">{{ arVacaciones.vrBonificacion | number_format(0, '.', ',')}}</td>                                                
                    </tr>  
                    <tr>
                        <td class="titulo"></td>
                        <td class="td-in-well"></td>
                        <td class="titulo"></td>
                        <td></td>
                        <td class="titulo">A PAGAR:</td>
                        <td class="td-in-well" align="right">{{ arVacaciones.vrVacacion | number_format(0, '.', ',')}}</td>                                                
                    </tr>                     
                    <tr>
                        <td class="titulo" >COMENTARIOS: </td>
                        <td class="td-in-well" colspan="7">{{ arVacaciones.comentarios }}</td>
                    </tr>                    
                </table>
            </div>
        </div>
        <ul class="nav nav-tabs">
            <li  class="active"><a href="#creditos" data-toggle="tab">Creditos <span class="badge">{{ arVacacionDeducciones.getTotalItemCount }}</span></a></li>            
            <li><a href="#bonificaciones" data-toggle="tab">Bonificaciones <span class="badge">{{ arVacacionBonificaciones.getTotalItemCount }}</span></a></li>

        </ul>
        <div class="tab-content">        
            <div class="tab-pane active" id="creditos">
                <table class="table table-striped table-bordered table-condensed">
                    <tr>
                        <th>CÓDIGO</td>
                        <th>TIPO</td>
                        <th>VALOR</td>
                        <th><input type="checkbox" name="ChkSeleccionarTodos" OnClick="ChequearTodos(tdis);"/></td>
                    </tr>
                    {% for arVacacionDeducciones in arVacacionDeducciones %}
                        <tr>
                            <td>
                                <input type="hidden" name="LblCodigoGuia[]" value="{{ arVacacionDeducciones.codigoVacacionCreditoPk }}">
                                <span class="badge">{{ arVacacionDeducciones.codigoVacacionCreditoPk }}</span>
                            </td>
                            <td>{{ arVacacionDeducciones.creditoRel.creditoTipoRel.nombre }}</td>           
                            <td style="text-align: right">{{ arVacacionDeducciones.vrDeduccion | number_format(2, '.', ',') }}</td>
                            <td><input type="checkbox" name="ChkSeleccionar[]" value="{{ arVacacionDeducciones.codigoVacacionCreditoPk }}" /></td>
                        </tr>
                    {% endfor %}
                </table>
                <div class="btn-toolbar" style="float:left">
                    <div class="btn-group">
                        <a class="btn btn-default btn-sm" href="{{ path('brs_rhu_movimiento_vacacion') }}" style="float:left">Volver</a>
                    </div>
                </div>  
                <div class="btn-toolbar" style="float: right">                           
                    <div class="btn-group">                
                        <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_movimiento_vacacion_detalle_credito', {'codigoVacacion': arVacaciones.codigoVacacionPk}) }}', 'AgregarNuevo', 600, 900)">Nuevo</a>
                    </div>
                    <div class="btn-group">                
                        {{ form_widget(form.BtnEliminarDeduccion, { 'attr': {'class': 'btn btn-danger btn-sm'} }) }}                
                    </div>
                </div>         
            </div>    
            <div class="tab-pane" id="bonificaciones">
                <table class="table table-striped table-bordered table-condensed">
                    <tr>
                        <th>CÓDIGO</td>
                        <th>CONCEPTO</td>
                        <th>VALOR</td>
                        <th><input type="checkbox" name="ChkSeleccionarTodos" OnClick="ChequearTodos(tdis);"/></td>
                    </tr>
                    {% for arVacacionBonificaciones in arVacacionBonificaciones %}
                        <tr>
                            <td>
                                <input type="hidden" name="LblCodigoGuia[]" value="{{ arVacacionBonificaciones.codigoVacacionBonificacionPk }}">
                                <span class="badge">{{ arVacacionBonificaciones.codigoVacacionBonificacionPk }}</span>
                            </td>
                            <td>{{ arVacacionBonificaciones.pagoConceptoRel.nombre }}</td>           
                            <td style="text-align: right">{{ arVacacionBonificaciones.vrBonificacion | number_format(2, '.', ',') }}</td>
                            <td><input type="checkbox" name="ChkSeleccionarBonificacion[]" value="{{ arVacacionBonificaciones.codigoVacacionBonificacionPk }}" /></td>
                        </tr>
                    {% endfor %}
                </table>
                <div class="tab-pane" id="bonificaciones">
                    <div class="btn-toolbar" style="float:left">
                        <div class="btn-group">
                            <a class="btn btn-default btn-sm" href="{{ path('brs_rhu_movimiento_vacacion') }}" style="float:left">Volver</a>
                        </div>
                    </div>  
                    <div class="btn-toolbar" style="float: right">                           
                        <div class="btn-group">                
                            <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_movimiento_vacacion_detalle_bonificacion', {'codigoVacacion': arVacaciones.codigoVacacionPk}) }}', 'AgregarNuevo', 600, 900)">Nuevo</a>
                        </div>
                        <div class="btn-group">                
                            {{ form_widget(form.BtnEliminarBonificacion, { 'attr': {'class': 'btn btn-danger btn-sm'} }) }}                
                        </div>
                    </div>
                </div>          
            </div>                    
        </div>                    

                   
                    
        {{ form_rest(form) }}
        {{ form_end(form) }}
    </div>
{% endblock %}
