{% extends '::base.html.twig' %}
{% block content %}
    <div class="container">
        <div class="page-header">
            <h3>Detalles del empleado</h3>
        </div>
        {{ form_start(form, { 'attr': {'class': 'form-horizontal', 'novalidate': 'novalidate'} }) }}
        {{ form_errors(form) }}
        <div class="btn-group">
            {{ form_widget(form.BtnImprimir, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}
            <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_ad_archivos_lista', { 'codigoDocumento': 3,  'numero': arEmpleado.codigoEmpleadoPk }) }}', 'Archivos', 500, 700)" >Archivos</a>                        
        </div>
        <br /> <br />
        <div class="panel panel-default">
            <div class="panel-heading">Informacion empleado</div>
            <div class="panel-body">
                <table width="100%" class="table table-condensed table-bordered">
                    <tr>
                        <td class="titulo">CODIGO:</td>
                        <td class="td-in-well">{{ arEmpleado.codigoEmpleadoPk }}</td>
                        <td class="titulo">LIBRETA MILITAR:</td>
                        <td class="td-in-well">{{ arEmpleado.libretaMilitar }}</td>
                        <td class="titulo">DIRECCION:</td>
                        <td class="td-in-well">{{ arEmpleado.direccion }}</td>
                    </tr>
                    <tr>
                        <td class="titulo">NOMBRE:</td>
                        <td class="td-in-well">{{ arEmpleado.nombreCorto }}</td>
                        <td class="titulo">CELULAR:</td>
                        <td class="td-in-well">{{ arEmpleado.celular }}</td>
                        <td class="titulo">BARRIO:</td>
                        <td class="td-in-well">{{ arEmpleado.barrioRel.nombre }}</td>
                    </tr>
                    <tr>
                        <td class="titulo">IDENTIFICACION:</td>
                        <td class="td-in-well">{{ arEmpleado.numeroIdentificacion }}</td>
                        <td class="titulo">TELEFONO:</td>
                        <td class="td-in-well">{{ arEmpleado.telefono }}</td>
                        <td class="titulo">CIUDAD:</td>
                        <td class="td-in-well">{{ arEmpleado.ciudadRel.nombre|default('SIN CONTRATO') }}</td>                    
                    </tr>                
                    <tr>
                        <td class="titulo">ESTADO CIVIL:</td>
                        <td class="td-in-well">{{ arEmpleado.estadoCivilRel.nombre }}</td>                    
                        <td class="titulo">SEXO:</td>
                        <td class="td-in-well">{% if arEmpleado.codigoSexoFk == "M" %} MASCULINO {% else %} FEMENINO{% endif %}</td>
                        <td class="titulo">RH</td>
                        <td class="td-in-well">{{ arEmpleado.rhRel.tipo }}</td>
                    </tr>                
                    <tr>
                        <td class="titulo">FECHA NACIMIENTO:</td>
                        <td class="td-in-well">{{ arEmpleado.fechaNacimiento|date("Y/m/d") }}</td>                    
                        <td class="titulo">CLASIFICACION RIESGO:</td>
                        <td class="td-in-well">{{ arEmpleado.clasificacionRiesgoRel.nombre|default('SIN CONTRATO') }}</td>
                        <td class="titulo">CORREO:</td>
                        <td class="td-in-well">{{ arEmpleado.correo }}</td>
                    </tr>
                    <tr>
                        <td class="titulo">TIPO PENSION:</td>
                        <td class="td-in-well">{{ arEmpleado.tipoPensionRel.nombre|default('SIN CONTRATO') }}</td>                    
                        <td class="titulo">CARGO:</td>
                        <td class="td-in-well">{{ arEmpleado.cargoRel.nombre|default('SIN CONTRATO') }}</td>
                        <td class="titulo">DESCRIPCION CARGO:</td>
                        <td class="td-in-well">{{ arEmpleado.cargoDescripcion }}</td>
                    </tr>                
                    <tr>
                        <td class="titulo">ENTIDAD PENSION:</td>
                        <td class="td-in-well" colspan="2">{{ arEmpleado.entidadPensionRel.nombre|default('SIN CONTRATO') }}</td>                    
                        <td class="td-in-well"></td>
                        <td class="titulo">PADRE FAMILIA</td>
                        <td class="td-in-well">{% if arEmpleado.padreFamilia == 1 %} SI {% else %} NO{% endif %}</td>
                    </tr>                
                    <tr>
                        <td class="titulo">ENTIDAD SALUD:</td>
                        <td class="td-in-well" colspan="2">{{ arEmpleado.entidadSaludRel.nombre|default('SIN CONTRATO') }}</td>                    
                        <td class="td-in-well"></td>
                        <td class="titulo">CABEZA FAMILIA</td>
                        <td class="td-in-well">{% if arEmpleado.cabezaHogar == 1 %} SI {% else %} NO{% endif %}</td>
                    </tr>                
                    <tr>
                        <td class="titulo">CAJA COMPENSACION:</td>
                        <td class="td-in-well" colspan="2">{{ arEmpleado.entidadCajaRel.nombre|default('SIN CONTRATO') }}</td>                    
                        <td class="td-in-well"></td>
                        <td class="titulo"></td>
                        <td class="td-in-well"></td>
                    </tr>                 
                    <tr>
                        <td class="titulo" >COMENTARIOS: </td>
                        <td class="td-in-well" colspan="7">{{ arEmpleado.comentarios }}</td>
                    </tr>
                </table>
            </div>
        </div>
        <a name="marcador"></a>
        <div class="panel panel-default">
            <div class="panel-heading">Contratos</div>
            <div class="panel-body">
                <table class="table table-striped table-bordered table-condensed">
                    <tr>
                        <th>{{ knp_pagination_sortable(arContratos, 'ID', 'e.codigoContratoPk') }}</th>
                        <th>TIPO</th>
                        <th>FECHA</th>
                        <th>NUMERO</th>
                        <th>CENTRO COSTO</th>
                        <th>TIEMPO</th>
                        <th>DESDE</th>
                        <th>HASTA</th>
                        <th>SALARIO</th>
                        <th>CARGO</th>
                        <th>D. CARGO</th>
                        <th>C. RIESGO</th>
                        <th>VIGENTE</th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                    </tr>
                    {% for arContratos in arContratos %}
                        <tr>
                            <td><input type="hidden" name="LblCodigo[]" value="{{ arContratos.codigoContratoPk }}">{{ arContratos.codigoContratoPk }} </td>
                            <td>{{ arContratos.contratoTipoRel.nombre|default('SIN TIPO')  }}</td>
                            <td>{{ arContratos.fecha |date("Y/m/d")  }}</td>
                            <td>{{ arContratos.numero  }}</td>
                            <td>{{ arContratos.centroCostoRel.nombre  }}</td>
                            <td>{{ arContratos.tipoTiempoRel.nombre  }}</td>
                            <td>{{ arContratos.fechaDesde |date("Y/m/d")  }}</td>
                            <td>{% if arContratos.indefinido == 1 %} INDEFINIDO {% else %} {{ arContratos.fechaHasta |date("Y/m/d")  }} {% endif %}</td>
                            <td style="text-align: right">{{ arContratos.vrSalario | number_format(0, '.', ',') }}</td>
                            <td>{{ arContratos.cargoRel.nombre|default('SIN CONTRATO')  }}</td>
                            <td>{{ arContratos.cargoDescripcion  }}</td>
                            <td>{{ arContratos.clasificacionRiesgoRel.nombre|default('SIN CONTRATO') }}</td>                            
                            <td>{% if arContratos.estadoActivo == 1 %} SI {% else %} NO {% endif %}</td>
                            <td style="text-align: center"><a href="javascript:abrirVentana3('{{ path('brs_rhu_contratos_nuevo', { 'codigoContrato': arContratos.codigoContratoPk,  'codigoEmpleado': arContratos.codigoEmpleadoFk}) }}', 'AgregarContrato', 600, 900)"><img src="{{ asset('imagenes/bootstrap/glyphicons_151_edit.png') }}" width=20 height=20></a></td>                            
                            <td style="text-align: center"><a href="{{ path('brs_rhu_base_contratos_detalles', { 'codigoContrato': arContratos.codigoContratoPk }) }}" target="_blank"><img src="{{ asset('imagenes/bootstrap/glyphicons_152_new_window.png') }}" width=22 height=22></a></td>                                            
                            <td><input type="checkbox" name="ChkSeleccionarContrato[]" value="{{ arContratos.codigoContratoPk }}" /></td>
                        </tr>
                    {% endfor %}
                </table>
                <div class="btn-toolbar" style="float: left">
                    {{ knp_pagination_render(arContratos) }} 
                </div>
                <div class="btn-toolbar" style="float: right">
                    <div class="btn-group">
                        <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_contratos_nuevo', { 'codigoContrato': 0,  'codigoEmpleado': arEmpleado.codigoEmpleadoPk}) }}', 'NuevoContrato', 600, 900)" >Nuevo</a>                        
                    </div>
                    <div class="btn-group">                        
                        {{ form_widget(form.BtnInactivarContrato, { 'attr': {'class': 'btn btn-danger btn-sm'} }) }}
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">Creditos</div>
            <div class="panel-body">
                <table  class="table table-striped table-bordered table-condensed table-hover">
                    <tr>
                        <th>{{ knp_pagination_sortable(arCreditos, 'ID', 'e.codigoCreditoPk') }}</th>
                        <th>TIPO</th>
                        <th>FECHA</th>
                        <th style="text-align: right">VR. CREDITO</th>
                        <th style="text-align: right">VR. CUOTA</th>
                        <th style="text-align: right">VR. SEGURO</th>
                        <th style="text-align: right">CUOTAS</th>
                        <th style="text-align: right">C. ACTUAL</th>
                        <th style="text-align: center">PAGADO</th>
                        <th style="text-align: center">APROBADO</th>
                        <th style="text-align: center">SUSPENDIDO</th>
                        <th></th>
                        <th></th>
                    </tr>
                    {% for arCreditos in arCreditos %}
                        <tr>
                            <td><input type="hidden" name="LblCodigo[]" value="{{ arCreditos.codigoCreditoPk }}">{{ arCreditos.codigoCreditoPk }} </td>
                            <td>{{ arCreditos.creditoTipoRel.nombre  }}</td>
                            <td>{{ arCreditos.fecha |date("Y/m/d")  }}</td>
                            <td style="text-align: right">{{ arCreditos.VrPagar | number_format(2, '.', ',') }}</td>
                            <td style="text-align: right">{{ (arCreditos.VrCuota) | number_format(2, '.', ',') }}</td>
                            <td style="text-align: right">{{ arCreditos.Seguro | number_format(2, '.', ',') }}</td>
                            <td style="text-align: right">{{ arCreditos.numeroCuotas | number_format(0, '.', ',') }}</td>
                            <td style="text-align: right">{{ arCreditos.numeroCuotaActual | number_format(0, '.', ',') }}</td>
                            <td {% if arCreditos.estadopagado == 1 %}class="success">SI{% else %}<td class="danger"> NO {% endif %}</td>
                            <td {% if arCreditos.Aprobado == 1 %}class="success">SI{% else %}<td class="danger"> NO {% endif %}</td>
                            <td {% if arCreditos.estadoSuspendido == 1 %}class="success">SI{% else %}<td class="danger"> NO {% endif %}</td>
                            {% if arCreditos.Aprobado == 1 %}
                                <td style="text-align: center"><a href="#marcador" onclick="javascript:alert('No se puede modificar el credito, se encuenta aprobado o cancelado!');"><img src="{{ asset('imagenes/bootstrap/glyphicons_151_edit.png') }}" width=20 height=20></a></td>                            
                                    {% else %}
                                <td style="text-align: center"><a href="javascript:abrirVentana3('{{ path('brs_rhu_creditos_nuevo', { 'codigoCredito': arCreditos.codigoCreditoPk,  'codigoEmpleado': arCreditos.codigoEmpleadoFk}) }}', 'AgregarContrato', 600, 900)" ><img src="{{ asset('imagenes/bootstrap/glyphicons_151_edit.png') }}" width=20 height=20></a></td>                            
                                    {% endif %}
                            <td><input type="checkbox" name="ChkSeleccionarCredito[]" value="{{ arCreditos.codigoCreditoPk }}" /></td>
                        </tr>
                    {% endfor %}
                </table>
                <div class="btn-toolbar" style="float: left">
                    {{ knp_pagination_render(arCreditos) }} 
                </div>
                <div class="btn-toolbar" style="float: right">
                    <div class="btn-group">
                        <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_creditos_nuevo', { 'codigoCredito': 0, 'codigoEmpleado': arEmpleado.codigoEmpleadoPk }) }}', 'AgregarCredito', 600, 900)" >Nuevo</a>
                    </div>

                    <div class="btn-group">                        
                        {{ form_widget(form.BtnEliminarCredito, { 'attr': {'class': 'btn btn-danger btn-sm'} }) }}
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">Pagos adicionales</div>
            <div class="panel-body">
                <table class="table table-striped table-bordered table-condensed">
                    <tr>
                        <th>{{ knp_pagination_sortable(arPagosAdicionales, 'ID', 'e.codigoPagoAdicionalPk') }}</th>
                        <th>NUMERO</th>
                        <th>CONCEPTO</th>
                        <th>CANT</th>
                        <th>VALOR</th>
                    </tr>
                    {% for arPagosAdicionales in arPagosAdicionales %}
                        <tr>
                            <td>
                                <input type="hidden" name="LblCodigoGuia[]" value="{{ arPagosAdicionales.codigoPagoAdicionalPk }}">
                                <span class="badge">{{ arPagosAdicionales.codigoPagoAdicionalPk }}</span>
                            </td>
                            <td>{{ arPagosAdicionales.codigoPagoAdicionalPk}}</td>
                            <td>{{ arPagosAdicionales.pagoConceptoRel.nombre }}</td>
                            <td style="text-align: right">{{ arPagosAdicionales.cantidad | number_format(2, '.', ',') }}</td>
                            <td style="text-align: right">{{ arPagosAdicionales.valor | number_format(2, '.', ',') }}</td>
                        </tr>
                    {% endfor %}
                </table>
                <div class="btn-toolbar" style="float: left">
                    {{ knp_pagination_render(arPagosAdicionales) }} 
                </div>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">Incapacidades</div>
            <div class="panel-body">
                <table class="table table-striped table-bordered table-condensed">
                    <tr>
                        <th>{{ knp_pagination_sortable(arIncapacidades, 'ID', 'e.codigoIncapacidadPk') }}</th>
                        <th>TIPO</th>
                        <th>DIAGNOSTICO</th>
                        <th>DESDE</th>
                        <th>HASTA</th>
                        <th>DIAS</th>
                        <th>PENDIENTES</th>
                        <th></th>
                        <th></th>
                    </tr>
                    {% for arIncapacidades in arIncapacidades %}
                        <tr>
                            <td><input type="hidden" name="LblCodigo[]" value="{{ arIncapacidades.codigoIncapacidadPk }}">{{ arIncapacidades.codigoIncapacidadPk }} </td>
                            <td>{{ arIncapacidades.pagoAdicionalSubtipoRel.nombre  }}</td>
                            <td>{{ arIncapacidades.incapacidadDiagnosticoRel.nombre  }}</td>
                            <td>{{ arIncapacidades.fechaDesde |date("Y/m/d")  }}</td>
                            <td>{{ arIncapacidades.fechaHasta |date("Y/m/d")  }}</td>
                            <td style="text-align: right">{{ arIncapacidades.cantidad | number_format(2, '.', ',') }}</td>
                            <td style="text-align: right">{{ arIncapacidades.cantidadPendiente | number_format(2, '.', ',') }}</td>
                            <td style="text-align: center"><a href="javascript:abrirVentana3('{{ path('brs_rhu_incapacidades_nuevo', {'codigoCentroCosto':  arEmpleado.codigoCentroCostoFk, 'codigoEmpleado':  arEmpleado.codigoEmpleadoPk, 'codigoIncapacidad': arIncapacidades.codigoIncapacidadPk }) }}', 'AgregarIncapacidad', 600, 900)"><img src="{{ asset('imagenes/bootstrap/glyphicons_151_edit.png') }}" width=20 height=20></a></td>                            
                            <td><input type="checkbox" name="ChkSeleccionarIncapacidad[]" value="{{ arIncapacidades.codigoIncapacidadPk }}" /></td>
                        </tr>
                    {% endfor %}
                </table>
                <div class="btn-toolbar" style="float: left">
                    {{ knp_pagination_render(arIncapacidades) }} 
                </div>
                <div class="btn-toolbar" style="float: right">
                    <div class="btn-group">
                        {% if arEmpleado.codigoCentroCostoFk != "" %} <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_incapacidades_nuevo', {'codigoCentroCosto': arEmpleado.codigoCentroCostoFk, 'codigoEmpleado': arEmpleado.codigoEmpleadoPk, 'codigoIncapacidad': 0 }) }}', 'AgregarIncapacidad', 600, 900)" >Nuevo</a> {% endif %}                        
                    </div>
                    <div class="btn-group">                        
                        {{ form_widget(form.BtnRetirarIncapacidad, { 'attr': {'class': 'btn btn-danger btn-sm'} }) }}
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">Licencias</div>
            <div class="panel-body">
                <table class="table table-striped table-bordered table-condensed">
                    <tr>
                        <th>{{ knp_pagination_sortable(arLicencias, 'ID', 'e.codigoLicenciaPk') }}</th>
                        <th>TIPO</th>
                        <th>DESDE</th>
                        <th>HASTA</th>
                        <th>HORAS</th>
                        <th>PENDIENTES</th>
                        <th>AUX TRANS</th>
                        <th>COMENTARIOS</th>
                        <th></th>
                    </tr>
                    {% for arLicencias in arLicencias %}
                        <tr>
                            <td><input type="hidden" name="LblCodigo[]" value="{{ arLicencias.codigoLicenciaPk }}">{{ arLicencias.codigoLicenciaPk }} </td>
                            <td>{{ arLicencias.pagoAdicionalSubtipoRel.nombre  }}</td>
                            <td>{{ arLicencias.fechaDesde |date("Y/m/d")  }}</td>
                            <td>{{ arLicencias.fechaHasta |date("Y/m/d")  }}</td>
                            <td style="text-align: right">{{ arLicencias.cantidad | number_format(2, '.', ',') }}</td>
                            <td style="text-align: right">{{ arLicencias.cantidadPendiente | number_format(2, '.', ',') }}</td>
                            <td>{% if arLicencias.afectaTransporte == 1 %} SI {% else %} NO {% endif %}</td>
                            <td>{{ arLicencias.comentarios }}</td>
                            <td><input type="checkbox" name="ChkSeleccionarLicencia[]" value="{{ arLicencias.codigoLicenciaPk }}" /></td>
                        </tr>
                    {% endfor %}
                </table>
                <div class="btn-toolbar" style="float: left">
                    {{ knp_pagination_render(arLicencias) }} 
                </div>
                <div class="btn-toolbar" style="float: right">
                    <div class="btn-group">
                        {% if arEmpleado.codigoCentroCostoFk != "" %}<a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_licencias_nuevo', {'codigoCentroCosto': arEmpleado.codigoCentroCostoFk, 'codigoEmpleado': arEmpleado.codigoEmpleadoPk }) }}', 'AgregarLicencia', 600, 900)" >Nuevo</a>{% endif %}                        
                    </div>
                    <div class="btn-group">                        
                        {{ form_widget(form.BtnRetirarLicencia, { 'attr': {'class': 'btn btn-danger btn-sm'} }) }}
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">Procesos disciplinario</div>
            <div class="panel-body">
                <table class="table table-striped table-bordered table-condensed">
                    <tr>
                        <th>{{ knp_pagination_sortable(arDisciplinarios, 'CODIGO', 'e.codigoDisciplinarioPk') }}</th>
                        <th>FECHA</th>
                        <th>C. CENTRO</th>                
                        <th>IDENTIFICACION</th>
                        <th>NOMBRE</th>                
                        <th>CARGO</th>
                        <th>PROCESO</th>
                        <th>CAUSAL</th>
                        <th style="text-align: center"></th>
                        <th></th>
                        <th></th>
                    </tr>
                    {% for arDisciplinarios in arDisciplinarios %}
                        <tr>
                            <td><input type="hidden" name="LblCodigo[]" value="{{ arDisciplinarios.codigoDisciplinarioPk }}">{{ arDisciplinarios.codigoDisciplinarioPk }} </td>
                            <td>{{ arDisciplinarios.fecha |date("Y/m/d")  }}</td>
                            <td>{{ arDisciplinarios.empleadoRel.centroCostoRel.nombre  }}</td>
                            <td>{{ arDisciplinarios.empleadoRel.numeroIdentificacion  }}</td>
                            <td>{{ arDisciplinarios.empleadoRel.nombreCorto  }}</td>
                            <td>{{ arDisciplinarios.empleadoRel.cargoDescripcion  }}</td>
                            <td>{{ arDisciplinarios.disciplinarioTipoRel.nombre  }}</td>                                
                            <td>{{ arDisciplinarios.asunto  }}</td>                                                                                                                
                            <td style="text-align: center"><a href="javascript:abrirVentana3('{{ path('brs_rhu_disciplinario_nuevo', {'codigoCentroCosto':  arEmpleado.codigoCentroCostoFk, 'codigoEmpleado':  arEmpleado.codigoEmpleadoPk, 'codigoDisciplinario': arDisciplinarios.codigoDisciplinarioPk }) }}', 'AgregarIncapacidad', 600, 900)"><img src="{{ asset('imagenes/bootstrap/glyphicons_151_edit.png') }}" width=20 height=20></a></td>                            
                            <td><input type="checkbox" name="ChkSeleccionarDisciplinario[]" value="{{ arDisciplinarios.codigoDisciplinarioPk }}" /></td>
                        </tr>
                    {% endfor %}
                </table>
                <div class="btn-toolbar" style="float: left">
                    {{ knp_pagination_render(arDisciplinarios) }} 
                </div>
                <div class="btn-toolbar" style="float: right">
                    <div class="btn-group">
                        {% if arEmpleado.codigoCentroCostoFk != "" %} <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_disciplinario_nuevo', {'codigoCentroCosto': arEmpleado.codigoCentroCostoFk, 'codigoEmpleado': arEmpleado.codigoEmpleadoPk, 'codigoDisciplinario': 0 }) }}', 'AgregarProcesoDisciplinario', 600, 900)" >Nuevo</a> {% endif %}                        
                    </div>
                    <div class="btn-group">                        
                        {{ form_widget(form.BtnEliminarDisciplinario, { 'attr': {'class': 'btn btn-danger btn-sm'} }) }}
                    </div>
                </div>
            </div>
        </div>
        <div class="btn-toolbar" style="float:left">
            <div class="btn-group">
                <a class="btn btn-default btn-sm" href="{{ path('brs_rhu_base_empleados_lista') }}" style="float:left">Volver</a>
            </div>
        </div>
        <br /><br />
        {{ form_rest(form) }}
        {{ form_end(form) }}
    </div>
{% endblock %}
