{% extends '::base.html.twig' %}
{% block content %}
    <div class="container">
        <div class="page-header">
            <h3>Detalles del pago</h3>
        </div>

        {{ form_start(form, { 'attr': {'class': 'form-horizontal', 'novalidate': 'novalidate'} }) }}
        {{ form_errors(form) }}
        <div class="btn-group">
            {{ form_widget(form.BtnImprimir, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}
        </div>
        <br /> <br />
        <div class="panel panel-default">
            <div class="panel-heading">Informacion del credito</div>
            <div class="panel-body">
                <table width="100%" class="table table-condensed table-bordered">
                    <tr>
                        <th class="td-label">Codigo Credito:</th>
                        <td class="td-in-well">{{ arCreditos.codigoCreditoPk }}</td>
                        <th class="td-label">Fecha:</th>
                        <td class="td-in-well">{{ arCreditos.fecha |date("Y/m/d") }}</td>
                    </tr>
                    <tr>
                        <th class="td-label">Empleado:</th>
                        <td class="td-in-well">{{ arCreditos.empleadoRel.nombreCorto }}</td>
                        <th class="td-label">Credito</th>
                        <td class="td-in-well">{{ arCreditos.creditoTipoRel.nombre }}</td>
                    </tr>                    
                    <tr>
                        <th class="td-label">Valor Credito:</th>
                        <td class="td-in-well">{{ arCreditos.vrPagar | number_format(2, '.', ',')}}</td>
                        <th class="td-label">Valor Cuota</th>
                        <td class="td-in-well">{{ arCreditos.vrCuota | number_format(2, '.', ',')}}</td>
                    </tr>
                    <tr>
                        <th class="td-label">Nro Cuotas:</th>
                        <td class="td-in-well">{{ arCreditos.numeroCuotas }}</td>
                        <th class="td-label">Nro Cuota Actual</th>
                        <td class="td-in-well">{{ arCreditos.numeroCuotaActual }}</td>
                    </tr>
                    <tr>
                        <th class="td-label">Saldo:</th>
                        <td class="td-in-well">{{ arCreditos.saldo | number_format(0, '.', ',')}}</td>
                        <th class="td-label">Estado</th>
                        <td {% if arCreditos.estadoPagado == 1 %} class="success">CANCELADO{% else %} <td class="danger"> PENDIENTE {% endif %}</td>
                    </tr>
                    <tr>
                        <th class="td-label">Tipo Pago:</th>
                        <td class="td-label">{{ arCreditos.tipoPago }}</td>
                        <th class="td-label">Aprobado</th>
                        <td {% if arCreditos.aprobado == 0 %} class="danger"> NO {% else %} <td class="success"> SI {% endif %} </td>
                    </tr>
                    <tr>
                        <th>Comentarios:</th>
                        <td class="td-label">{{ arCreditos.comentarios }}</td>
                        <th class="td-label">Seguro:</th>
                        <td class="td-label">{{ arCreditos.seguro }}</td>
                    </tr>
                </table>
            </div>
        </div>        
        <div class="panel panel-default">
            <div class="panel-heading">Pagos</div>
            <div class="panel-body">
                <table  class="table table-striped table-bordered table-condensed table-hover">
                    <tr>
                        <th>CODIGO PAGO</th>
                        <th>CODIGO CREDITO</th>
                        <th style="text-align: right">VR. CUOTA</th>
                        <th style="text-align: right">VR. SEGURO</th>
                        <th style="text-align: right">VR. PAGO</th>
                        <th>FECHA PAGO</th>
                        <th>TIPO PAGO</th>
                    </tr>
                    {% for arCreditoPago in arCreditoPago %}
                        <tr>
                            <td>{{ arCreditoPago.codigoPagoCreditoPk  }}</td>
                            <td>{{ arCreditoPago.codigoCreditoFk  }}</td>
                            <td style="text-align: right">{{ ((arCreditoPago.VrCuota - arCreditoPago.Seguro) | number_format(2, '.', ',')) }}</td>
                            <td style="text-align: right">{{ arCreditoPago.Seguro | number_format(2, '.', ',') }}</td>
                            <td style="text-align: right">{{ arCreditoPago.VrCuota | number_format(2, '.', ',') }}</td>
                            <td>{{ arCreditoPago.fechaPago |date("Y/m/d")  }}</td>
                            <td>{{ arCreditoPago.tipoPago  }}</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
        <div class="btn-toolbar" style="float: right">
            <div class="btn-toolbar" style="float: right">
                <div class="btn-group">
                    {% if arCreditos.aprobado == 0 or arCreditos.estadoPagado == 1 %} <a class="btn btn-default btn-sm" href="#">Nuevo</a> {% else %}
                    <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_credito_nuevo_detalle', { 'codigoCreditoPk': arCreditos.codigoCreditoPk}) }}', 'AgregarCredito', 600, 900)" style="float:left">Nuevo</a>
                    {% endif%}
                                            
                </div>
            </div>
        </div>
            
        <div class="btn-toolbar" style="float:left">
            <div class="btn-group">
                <a class="btn btn-default" href="{{ path('brs_rhu_creditos_lista') }}" style="float:left">Volver</a>
            </div>
        </div>
        <br /><br />
        {{ form_rest(form) }}
        {{ form_end(form) }}
    </div>
{% endblock %}
