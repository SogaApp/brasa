
{% extends 'zikmontFrontEndBundle::layout_app.html.twig' %}
{% block content %}
<div class="left_articles">
    <p class="description"><h1>Existencias</h1></p>

    {% import 'zikmontFrontEndBundle:Plantillas:macros.html.twig' as utilidades %}
    <hr/>
        <!-- Formulario de busqueda -->
        <form id="FrmBusqueda" class="well" action="{{ path('inventario_consultas_existencias')}}" method="POST" novalidate>
            <table class="main-all-table-form">
                <tr>
                    
                    <div class="input-prepend">
                        <span class="add-on-zikmont">Item</span>
                        {% if arrControles %} {%set ultimo_item = arrControles.TxtCodigoItem %} {% else %} {%set ultimo_item = '' %} {% endif %} 
                        {{ utilidades.textboxitem(ultimo_item,7,false,false) }}
                    </div>
                </tr>
                
                <tr>
                    <div class="input-prepend">
                        <span class="add-on-zikmont">Lote</span>
                        <input type="text" class="span2" name="TxtLote" {% if arrControles %} value="{{arrControles.TxtLote}}" {% endif %}>
                    </div>
                </tr>           
                
                <tr>
                    <div class="input-prepend">
                        <span class="add-on-zikmont">Bodega</span>                                                      
                        <select name="CboBodegas">
                            <option value="">Seleccione</option>
                            {% for bodega in arBodegas%}
                            <option value="{{bodega.codigoBodegaPk}}" {% if arrControles %} {% if arrControles.CboBodegas == bodega.codigoBodegaPk %} selected {%endif%}{% endif %}>{{bodega.nombre}}</option>
                            {%endfor%}
                        </select>
                    </div>                    
                </tr>
                    
                <tr>
                    <td class="td-in" ><button  class="btn btn-primary" type="submit" name="OpSubmit" value="OpActualizarDetalles">Buscar</button></td>
                </tr>
            </table>
        </form>
        <!-- Fin formulario de busqueda -->
    <hr/>

    <table class="table table-striped table-bordered table-condensed" style="width: 0%">
        <tr>
            <th>Codigo</th>
            <th>Descripcion</th>
            <th>Bodega</th>
            <th>Lote</th>
            <th>Vencimiento</th>
            <th>Existencia</th>
            <th>Remision</th>
            <th>Reserva</th>
            <th>Disponible</th>
        </tr>
        {% for lote in arLotes %}
            <tr>          
                <td>{{ lote.codigoItemFk }}</td>
                <td>{{ lote.descripcion }}</td>
                <td>{{ lote.nombreBodega }}</td>
                <td>{{ lote.loteFk }}</td>
                <td>{{ lote.fechaVencimiento |date("Y/m/d") }}</td>
                <td style="text-align: right">{{ lote.existencia | number_format(0, '.', ',') }}</td>
                <td style="text-align: right">{{ lote.cantidadRemisionada | number_format(0, '.', ',') }}</td>
                <td style="text-align: right">{{ lote.cantidadReservada | number_format(0, '.', ',') }}</td>
                <td style="text-align: right">{{ lote.cantidadDisponible | number_format(0, '.', ',') }}</td>
            </tr>
        {% endfor %}
    </table>
</div>
{% endblock %}