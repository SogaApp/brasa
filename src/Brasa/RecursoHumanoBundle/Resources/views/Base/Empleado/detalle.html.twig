{% extends '::base.html.twig' %}
{% block content %}
    <div class="container">
        <div class="page-header">
            <h3>Detalles del empleado</h3>
        </div>

        {{ form_start(form, { 'attr': {'class': 'form-horizontal', 'novalidate': 'novalidate'} }) }}
        {{ form_errors(form) }}
        <div class="btn-group">
            {{ form_widget(form.BtnImprimir, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}
        </div>
        <br /> <br />
        <div class="panel panel-default">
            <div class="panel-heading">Informacion empleado</div>
            <div class="panel-body">
                <table width="100%" class="table table-condensed table-bordered">
                    <tr>
                        <td class="td-label">Codigo:</td>
                        <td class="td-in-well">{{ arEmpleado.codigoEmpleadoPk }}</td>
                        <td class="td-label">Fecha nacimiento:</td>
                        <td class="td-in-well">{{ arEmpleado.fechaNacimiento |date("Y/m/d") }}</td>
                    </tr>
                    <tr>
                        <td class="td-label">Identificacion:</td>
                        <td class="td-in-well">{{ arEmpleado.numeroIdentificacion }}</td>
                        <td class="td-label"></td>
                        <td class="td-in-well"></td>
                    </tr>                    
                    <tr>
                        <td class="td-label">Nombre:</td>
                        <td class="td-in-well">{{ arEmpleado.nombreCorto }}</td>
                        <td class="td-label"></td>
                        <td class="td-in-well"></td>
                    </tr>
                    <tr>
                        <td colspan="8">Comentarios:</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">Contratos</div>
            <div class="panel-body">
                <table class="table table-striped table-bordered table-condensed">
                    <tr>
                        <th>ID</th>
                        <th>FECHA</th>
                        <th>NUMERO</th>
                        <th>CENTRO COSTO</th>
                        <th>TIEMPO</th>
                        <th>DESDE</th>
                        <th>HASTA</th>
                        <th>SALARIO</th>
                        <th>VIGENTE</th>
                        <th></th>
                        <th></th>
                        <th></th>
                    </tr>
                    {% for arContratos in arContratos %}
                        <tr>
                            <td><input type="hidden" name="LblCodigo[]" value="{{ arContratos.codigoContratoPk }}">{{ arContratos.codigoContratoPk }} </td>
                            <td>{{ arContratos.fecha |date("Y/m/d")  }}</td>
                            <td>{{ arContratos.numero  }}</td>
                            <td>{{ arContratos.centroCostoRel.nombre  }}</td>
                            <td>{{ arContratos.tipoTiempoRel.nombre  }}</td>
                            <td>{{ arContratos.fechaDesde |date("Y/m/d")  }}</td>
                            <td>{% if arContratos.indefinido == 1 %} INDEFINIDO {% else %} {{ arContratos.fechaHasta |date("Y/m/d")  }} {% endif %}</td>
                            <td style="text-align: right">{{ arContratos.vrSalario | number_format(0, '.', ',') }}</td>
                            <td>{% if arContratos.estadoActivo == 1 %} SI {% else %} NO {% endif %}</td>
                            {% if arContratos.indefinido == 1 %}
                                <td style="text-align: center"><a class="btn btn-default btn-xs" id="{{ path('brs_rhu_contratos_terminar', { 'codigoContrato': arContratos.codigoContratoPk}) }}" style="float:left">Terminar</a></td>
                            {% else %}
                                <td></td>
                            {% endif %}
                            <td style="text-align: center"><a href="javascript:abrirVentana3('{{ path('brs_rhu_contratos_nuevo', { 'codigoContrato': arContratos.codigoContratoPk,  'codigoEmpleado': arContratos.codigoEmpleadoFk}) }}', 'AgregarContrato', 600, 900)" ><img src="{{ asset('imagenes/bootstrap/glyphicons_151_edit.png') }}" width=20 height=20></a></td>                            
                            <td><input type="checkbox" name="ChkSeleccionarContrato[]" value="{{ arContratos.codigoContratoPk }}" /></td>
                        </tr>
                    {% endfor %}
                </table>
                <div class="btn-toolbar" style="float: right">
                    <div class="btn-group">
                        <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_contratos_nuevo', { 'codigoContrato': 0,  'codigoEmpleado': arEmpleado.codigoEmpleadoPk}) }}', 'NuevoContrato', 600, 900)" >Nuevo</a>                        
                        {{ form_widget(form.BtnRetirarContrato, { 'attr': {'class': 'btn btn-danger btn-sm'} }) }}
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">Creditos</div>
            <div class="panel-body">
                <table  class="table table-striped table-bordered table-condensed table-hover">
                    <tr>
                        <th>ID</th>
                        <th>TIPO</th>
                        <th>FECHA</th>
                        <th style="text-align: right">VR. CREDITO</th>
                        <th style="text-align: right">VR. CUOTA</th>
                        <th style="text-align: right">CUOTAS</th>
                        <th style="text-align: right">C. ACTUAL</th>
                        <th style="text-align: center">PAGADO</th>
                        <th></th>
                    </tr>
                    {% for arCreditos in arCreditos %}
                        <tr>
                            <td><input type="hidden" name="LblCodigo[]" value="{{ arCreditos.codigoCreditoPk }}">{{ arCreditos.codigoCreditoPk }} </td>
                            <td>{{ arCreditos.creditoTipoRel.nombre  }}</td>
                            <td>{{ arCreditos.fecha |date("Y/m/d")  }}</td>
                            <td style="text-align: right">{{ arCreditos.VrPagar | number_format(2, '.', ',') }}</td>
                            <td style="text-align: right">{{ arCreditos.VrCuota | number_format(2, '.', ',') }}</td>
                            <td style="text-align: right">{{ arCreditos.numeroCuotas | number_format(0, '.', ',') }}</td>
                            <td style="text-align: right">{{ arCreditos.numeroCuotaActual | number_format(0, '.', ',') }}</td>
                            <td {% if arCreditos.estadoPagado == 1 %}class="success"{% endif %}>{% if arCreditos.estadoPagado == 1 %} SI {% else %} NO {% endif %}</td>
                            <td><input type="checkbox" name="ChkSeleccionar[]" value="{{ arCreditos.codigoCreditoPk }}" /></td>
                        </tr>
                    {% endfor %}
                </table>
                <div class="btn-toolbar" style="float: right">
                    <div class="btn-group">
                        <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_creditos_nuevo', { 'codigoCredito': 0, 'codigoEmpleado': arEmpleado.codigoEmpleadoPk }) }}', 'AgregarCredito', 600, 900)" >Nuevo</a>
                        
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">Pagos adicionales</div>
            <div class="panel-body">
                <table class="table table-striped table-bordered table-condensed">
                    <tr>
                        <th>ID</th>
                        <th>NUMERO</th>
                        <th>CONCEPTO</th>
                        <th>CANT</th>
                        <th>VALOR</th>
                    </tr>
                    {% for arPagosAdicionales in arPagosAdicionales %}
                        <tr>
                            <td>
                                <input type="hidden" name="LblCodigoGuia[]" value="{{ arPagosAdicionales.codigoPagoAdicionalPk }}">
                                <span class="badge">{{ arPagosAdicionales.codigoPagoAdicionalPk }}</span>
                            </td>
                            <td>{{ arPagosAdicionales.codigoPagoAdicionalPk}}</td>
                            <td>{{ arPagosAdicionales.pagoConceptoRel.nombre }}</td>
                            <td style="text-align: right">{{ arPagosAdicionales.cantidad | number_format(2, '.', ',') }}</td>
                            <td style="text-align: right">{{ arPagosAdicionales.valor | number_format(2, '.', ',') }}</td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">Incapacidades</div>
            <div class="panel-body">
                <table class="table table-striped table-bordered table-condensed">
                    <tr>
                        <th>ID</th>
                        <th>TIPO</th>
                        <th>DIAGNOSTICO</th>
                        <th>DESDE</th>
                        <th>HASTA</th>
                        <th>DIAS</th>
                        <th>PENDIENTES</th>
                        <th></th>
                        <th></th>
                    </tr>
                    {% for arIncapacidades in arIncapacidades %}
                        <tr>
                            <td><input type="hidden" name="LblCodigo[]" value="{{ arIncapacidades.codigoIncapacidadPk }}">{{ arIncapacidades.codigoIncapacidadPk }} </td>
                            <td>{{ arIncapacidades.pagoAdicionalSubtipoRel.nombre  }}</td>
                            <td>{{ arIncapacidades.incapacidadDiagnosticoRel.nombre  }}</td>
                            <td>{{ arIncapacidades.fechaDesde |date("Y/m/d")  }}</td>
                            <td>{{ arIncapacidades.fechaHasta |date("Y/m/d")  }}</td>
                            <td style="text-align: right">{{ arIncapacidades.cantidad | number_format(2, '.', ',') }}</td>
                            <td style="text-align: right">{{ arIncapacidades.cantidadPendiente | number_format(2, '.', ',') }}</td>
                            <td style="text-align: center"><a href="javascript:abrirVentana3('{{ path('brs_rhu_incapacidades_nuevo', {'codigoCentroCosto':  arEmpleado.codigoCentroCostoFk, 'codigoEmpleado':  arEmpleado.codigoEmpleadoPk, 'codigoIncapacidad': arIncapacidades.codigoIncapacidadPk }) }}', 'AgregarIncapacidad', 600, 900)"><img src="{{ asset('imagenes/bootstrap/glyphicons_151_edit.png') }}" width=20 height=20></a></td>                            
                            <td><input type="checkbox" name="ChkSeleccionarIncapacidad[]" value="{{ arIncapacidades.codigoIncapacidadPk }}" /></td>
                        </tr>
                    {% endfor %}
                </table>
                <div class="btn-toolbar" style="float: right">
                    <div class="btn-group">
                        {% if arEmpleado.codigoCentroCostoFk != "" %} <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_incapacidades_nuevo', {'codigoCentroCosto': arEmpleado.codigoCentroCostoFk, 'codigoEmpleado': arEmpleado.codigoEmpleadoPk, 'codigoIncapacidad': 0 }) }}', 'AgregarIncapacidad', 600, 900)" >Agregar</a> {% endif %}                        
                        {{ form_widget(form.BtnRetirarIncapacidad, { 'attr': {'class': 'btn btn-danger btn-sm'} }) }}
                    </div>
                </div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">Licencias</div>
            <div class="panel-body">
                <table class="table table-striped table-bordered table-condensed">
                    <tr>
                        <th>ID</th>
                        <th>TIPO</th>
                        <th>DESDE</th>
                        <th>HASTA</th>
                        <th>HORAS</th>
                        <th>PENDIENTES</th>
                        <th>AUX TRANS</th>
                        <th>COMENTARIOS</th>
                        <th></th>
                    </tr>
                    {% for arLicencias in arLicencias %}
                        <tr>
                            <td><input type="hidden" name="LblCodigo[]" value="{{ arLicencias.codigoLicenciaPk }}">{{ arLicencias.codigoLicenciaPk }} </td>
                            <td>{{ arLicencias.pagoAdicionalSubtipoRel.nombre  }}</td>
                            <td>{{ arLicencias.fechaDesde |date("Y/m/d")  }}</td>
                            <td>{{ arLicencias.fechaHasta |date("Y/m/d")  }}</td>
                            <td style="text-align: right">{{ arLicencias.cantidad | number_format(2, '.', ',') }}</td>
                            <td style="text-align: right">{{ arLicencias.cantidadPendiente | number_format(2, '.', ',') }}</td>
                            <td>{% if arLicencias.afectaTransporte == 1 %} SI {% else %} NO {% endif %}</td>
                            <td>{{ arLicencias.comentarios }}</td>
                            <td><input type="checkbox" name="ChkSeleccionarLicencia[]" value="{{ arLicencias.codigoLicenciaPk }}" /></td>
                        </tr>
                    {% endfor %}
                </table>
                <div class="btn-toolbar" style="float: right">
                    <div class="btn-group">
                        {% if arEmpleado.codigoCentroCostoFk != "" %}<a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_licencias_nuevo', {'codigoCentroCosto': arEmpleado.codigoCentroCostoFk, 'codigoEmpleado': arEmpleado.codigoEmpleadoPk }) }}', 'AgregarLicencia', 600, 900)" >Agregar</a>{% endif %}
                        {{ form_widget(form.BtnRetirarLicencia, { 'attr': {'class': 'btn btn-danger btn-sm'} }) }}
                    </div>
                </div>
            </div>
        </div>

        <div class="btn-toolbar" style="float:left">
            <div class="btn-group">
                <a class="btn btn-default" href="{{ path('brs_rhu_base_empleados_lista') }}" style="float:left">Volver</a>
            </div>
        </div>
        <br /><br />
        {{ form_rest(form) }}
        {{ form_end(form) }}
    </div>
{% endblock %}
