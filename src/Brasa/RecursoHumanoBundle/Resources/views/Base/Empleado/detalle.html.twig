{% extends '::base.html.twig' %}
{% block content %}
    <div class="container">
        <div class="page-header">
            <h3>Detalles del empleado</h3>            
        </div>     
        {{ form_start(form, { 'attr': {'class': 'form-horizontal', 'novalidate': 'novalidate'} }) }}
        {{ form_errors(form) }}
        <div class="btn-group">
            {{ form_widget(form.BtnImprimir, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}            
        </div>
        <br /> <br />       
        <div class="panel panel-default">
            <div class="panel-heading">Informacion empleado</div>
            <div class="panel-body">
                <table width="100%" class="table table-condensed table-bordered">
                    <tr>
                        <td class="td-label">Codigo:</td>
                        <td class="td-in-well">{{ arEmpleado.codigoEmpleadoPk }}</td>
                        <td class="td-label">Fecha nacimiento:</td>
                        <td class="td-in-well">{{ arEmpleado.fechaNacimiento |date("Y/m/d") }}</td>
                    </tr>
                    <tr>
                        <td class="td-label">Nombre:</td>
                        <td class="td-in-well">{{ arEmpleado.nombreCorto }}</td>
                        <td class="td-label"></td>
                        <td class="td-in-well"></td>
                    </tr>
                    <tr>
                        <td colspan="8">Comentarios:</td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">Contratos</div>
            <div class="panel-body">
                <table class="table table-striped table-bordered table-condensed">
                    <tr>
                        <th>ID</th>
                        <th>FECHA</th>
                        <th>NUMERO</th>
                        <th>DESDE</th>
                        <th>HASTA</th>                    
                        <th>SALARIO</th> 
                        <th>VIGENTE</th>
                        <th></th>
                        <th></th>
                    </tr>
                    {% for arContratos in arContratos %}
                        <tr>
                            <td><input type="hidden" name="LblCodigo[]" value="{{ arContratos.codigoContratoPk }}">{{ arContratos.codigoContratoPk }} </td>
                            <td>{{ arContratos.fecha |date("Y/m/d")  }}</td>
                            <td>{{ arContratos.numero  }}</td>
                            <td>{{ arContratos.fechaDesde |date("Y/m/d")  }}</td>
                            <td>{{ arContratos.fechaHasta |date("Y/m/d")  }}</td>
                            <td style="text-align: right">{{ arContratos.vrSalario | number_format(0, '.', ',') }}</td>
                            <td>{% if arContratos.estadoActivo == 1 %} SI {% else %} NO {% endif %}</td>                        
                            <td style="text-align: center"><a href="{{ path('brs_rhu_contratos_nuevo', { 'codigoContrato':  arContratos.codigoContratoPk, 'codigoEmpleado':  arContratos.codigoEmpleadoFk }) }}" ><img src="{{ asset('imagenes/bootstrap/glyphicons_151_edit.png') }}" width=20 height=20></a></td>                                    
                            <td><input type="checkbox" name="ChkSeleccionarContrato[]" value="{{ arContratos.codigoContratoPk }}" /></td>                    
                        </tr>
                    {% endfor %}
                </table>
                <div class="btn-toolbar" style="float: right">
                    <div class="btn-group">
                        <a class="btn btn-default btn-sm" href="{{ path('brs_rhu_contratos_nuevo', { 'codigoContrato': 0,  'codigoEmpleado': arEmpleado.codigoEmpleadoPk}) }}" style="float:left">Nuevo</a>                                                                                    
                        {{ form_widget(form.BtnRetirarContrato, { 'attr': {'class': 'btn btn-danger btn-sm'} }) }}                                    
                    </div>
                </div>            
            </div>
        </div> 
        <div class="panel panel-default">
            <div class="panel-heading">Creditos</div>
            <div class="panel-body">
                <table  class="table table-striped table-bordered table-condensed table-hover">
                    <tr>
                        <th>ID</th>
                        <th>TIPO</th>
                        <th>FECHA</th>
                        <th>EMPLEADO</th>
                        <th style="text-align: right">VR. CREDITO</th>
                        <th style="text-align: right">VR. CUOTA</th>
                        <th style="text-align: right">CUOTAS</th>
                        <th style="text-align: right">C. ACTUAL</th>
                        <th style="text-align: center"></th>
                        <th></th>
                    </tr>
                    {% for arCreditos in arCreditos %}
                        <tr>
                            <td><input type="hidden" name="LblCodigo[]" value="{{ arCreditos.codigoCreditoPk }}">{{ arCreditos.codigoCreditoPk }} </td>
                            <td>{{ arCreditos.creditoTipoRel.nombre  }}</td>
                            <td>{{ arCreditos.fecha |date("Y/m/d")  }}</td>
                            <td>{{ arCreditos.empleadoRel.nombreCorto  }}</td>
                            <td style="text-align: right">{{ arCreditos.VrPagar | number_format(2, '.', ',') }}</td>
                            <td style="text-align: right">{{ arCreditos.VrCuota | number_format(2, '.', ',') }}</td>
                            <td style="text-align: right">{{ arCreditos.numeroCuotas | number_format(0, '.', ',') }}</td>
                            <td style="text-align: right">{{ arCreditos.numeroCuotaActual | number_format(0, '.', ',') }}</td>
                            <td {% if arCreditos.estadoPagado == 1 %}class="success"{% endif %}>{% if arCreditos.estadoPagado == 1 %} SI {% else %} NO {% endif %}</td>                
                            <td><input type="checkbox" name="ChkSeleccionar[]" value="{{ arCreditos.codigoCreditoPk }}" /></td>
                        </tr>
                    {% endfor %}
                </table>        
            </div>
        </div>            
        <div class="panel panel-default">
            <div class="panel-heading">Pagos adicionales</div>
            <div class="panel-body">
                <table class="table table-striped table-bordered table-condensed">
                    <tr>
                        <th>ID</th>
                        <th>NUMERO</th>
                        <th>CONCEPTO</th>
                        <th>EMPLEADO</th>
                        <th>CANT</th>
                        <th>VALOR</th>
                    </tr>
                    {% for arPagosAdicionales in arPagosAdicionales %}
                        <tr>
                            <td>
                                <input type="hidden" name="LblCodigoGuia[]" value="{{ arPagosAdicionales.codigoPagoAdicionalPk }}">
                                <span class="badge">{{ arPagosAdicionales.codigoPagoAdicionalPk }}</span>
                            </td>
                            <td>{{ arPagosAdicionales.codigoPagoAdicionalPk}}</td>
                            <td>{{ arPagosAdicionales.pagoConceptoRel.nombre }}</td>
                            <td>{{ arPagosAdicionales.empleadoRel.nombreCorto }}</td>
                            <td style="text-align: right">{{ arPagosAdicionales.cantidad | number_format(2, '.', ',') }}</td>                            
                            <td style="text-align: right">{{ arPagosAdicionales.valor | number_format(2, '.', ',') }}</td>                                                                        
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </div>  

        <div class="panel panel-default">
            <div class="panel-heading">Incapacidades</div>
            <div class="panel-body">
                <table class="table table-striped table-bordered table-condensed">
                    <tr>
                        <th>ID</th>
                        <th>Fecha</th>
                        <th>Empleado</th>
                        <th>Dias</th>
                        <th>D. pendientes</th>                    
                    </tr>
                    {% for arIncapacidades in arIncapacidades %}
                        <tr>
                            <td><input type="hidden" name="LblCodigo[]" value="{{ arIncapacidades.codigoIncapacidadPk }}">{{ arIncapacidades.codigoIncapacidadPk }} </td>
                            <td>{{ arIncapacidades.fecha |date("Y/m/d")  }}</td>
                            <td>{{ arIncapacidades.empleadoRel.nombreCorto  }}</td>
                            <td style="text-align: right">{{ arIncapacidades.cantidad | number_format(0, '.', ',') }}</td>
                            <td style="text-align: right">{{ arIncapacidades.cantidadPendiente | number_format(0, '.', ',') }}</td>                    
                        </tr>
                    {% endfor %}
                </table>
            </div>
        </div>        


        <div class="btn-toolbar" style="float:left">
            <div class="btn-group">
                <a class="btn btn-default" href="{{ path('brs_rhu_base_empleados_lista') }}" style="float:left">Volver</a>
            </div>
        </div>
        <br /><br />
        {{ form_rest(form) }}
        {{ form_end(form) }} 
    </div>
{% endblock %}
