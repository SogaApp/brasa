{% extends '::base.html.twig' %}
{% block title %}Capacitación detalle - Soga App{% endblock %}
{% block content %}
    <div class="container">
        <div class="page-header">
            <h3>Detalles de la capacitacion</h3>
        </div>
        {{ form_start(form, { 'attr': {'class': 'form-horizontal', 'novalidate': 'novalidate'} }) }}
        {{ form_errors(form) }}
        <div class="btn-group">
            {{ form_widget(form.BtnAutorizar, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}
            {{ form_widget(form.BtnDesAutorizar, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}
            {{ form_widget(form.BtnImprimir, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}            
            {{ form_widget(form.BtnImprimirNotas, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}            
            {{ form_widget(form.BtnCerrar, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}
            <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_ad_archivos_lista', { 'codigoDocumento': 20,  'numero': arCapacitacion.codigoCapacitacionPk }) }}', 'Archivos', 500, 700)" >Archivos</a>
        </div>
        <br /> <br />
        <div class="panel panel-default">
            <div class="panel-heading">Información</div>
            <div class="panel-body">
            <table width="100%" class="table table-condensed table-bordered">
                <tr>
                    <td class="titulo">CÓDIGO:</td>
                    <td class="td-in-well">{{ arCapacitacion.codigoCapacitacionPk }}</td>
                    <td class="titulo">FECHA:</td>
                    <td class="td-in-well">{{ arCapacitacion.fecha|date("Y/m/d") }}</td>
                    <td class="titulo">ABIERTO</td>
                    <td class="td-in-well">{% if arCapacitacion.estado == 0%}SI{% else %}NO{% endif%}</td>
                </tr>
                <tr>
                    <td class="titulo">TIPO CAPACITACIÓN:</td>
                    <td class="td-in-well">{{ arCapacitacion.capacitacionTipoRel.nombre |default('') }}</td>
                    <td class="titulo">TEMA:</td>
                    <td class="td-in-well">{{ arCapacitacion.tema }}</td>
                    <td class="titulo"></td>
                    <td class="td-in-well"></td>
                </tr>
                <tr>
                    <td class="titulo">PERSONAS CAPACITAR:</td>
                    <td class="td-in-well">{{ arCapacitacion.numeroPersonasCapacitar }}</td>
                    <td class="titulo">PERSONAS ASISTIERON:</td>
                    <td class="td-in-well">{{ arCapacitacion.numeroPersonasAsistieron }}</td>
                    <td class="titulo">VALOR CAPACITACIÓN</td>
                    <td class="td-in-well" align="rigth">{{ arCapacitacion.vrCapacitacion }}</td></td>
                </tr>
                <tr>
                    <td colspan="8">COMENTARIOS: {{ arCapacitacion.comentarios }}</td>
                </tr>
            </table>
            </div>
        </div>
        <a name="marcador"></a>
        <ul class="nav nav-tabs">
            <li class="active"><a href="#detalles" data-toggle="tab">Detalles</a></li>
            <li><a href="#notas" data-toggle="tab">Notas</a></li>
        </ul>
        <div class="tab-content">
            <div class="tab-pane active" id="detalles">
                <br />
                <table class="table table-striped table-bordered table-condensed">
                    <tr>
                        <th>CÓDIGO</th>
                        <th>IDENTIFICACION</th>
                        <th>EMPLEADO</th>
                        <th>CENTRO COSTO</th>
                        <th>CARGO</th>
                        <th>ASISTENCIA</th>
                        <th><input type="checkbox" name="ChkSeleccionarTodos" OnClick="ChequearTodos(this);"/></th>
                    </tr>
                    {% for arCapacitacionesDetalles in arCapacitacionesDetalles %}
                        <tr>
                            <td><input type="hidden" name="LblCodigo[]" value="{{ arCapacitacionesDetalles.codigoCapacitacionDetallePk }}">{{ arCapacitacionesDetalles.codigoCapacitacionDetallePk }} </td>
                            <td>{{ arCapacitacionesDetalles.numeroIdentificacion }}</td>
                            <td>{{ arCapacitacionesDetalles.nombreCorto }}</td>
                            <td>{{ arCapacitacionesDetalles.empleadoRel.centroCostoRel.nombre | default('') }}</td>
                            <td>{{ arCapacitacionesDetalles.empleadoRel.cargoRel.nombre | default('') }}</td>
                            {% if arCapacitacion.estadoAutorizado == 0 %}
                            <td align="center">
                                <select name="cboAsistencia{{ arCapacitacionesDetalles.codigoCapacitacionDetallePk }}">
                                    <option value="0" {% if arCapacitacionesDetalles.asistencia == 0 %} selected="true" {% endif %}>NO</option>
                                    <option value="1" {% if arCapacitacionesDetalles.asistencia == 1 %} selected="true" {% endif %}>SI</option>
                                </select>
                            </td>
                            {% else %}
                                <td>{% if arCapacitacionesDetalles.asistencia == 1 %}SI {% else %}NO{% endif %}</td>
                            {% endif %}
                            <td align="center"><input type="checkbox" name="ChkSeleccionar[]" value="{{ arCapacitacionesDetalles.codigoCapacitacionDetallePk }}" /></td>
                        </tr>
                    {% endfor %}
                </table>
                <div class="btn-toolbar" style="float: right">
                    <div class="btn-group">
                        {% if arCapacitacion.estadoAutorizado == 0 %}
                            <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_capacitacion_detalle_nuevo_empleado', {'codigoCapacitacion': arCapacitacion.codigoCapacitacionPk }) }}', 'AgregarEmpleadoCapacitacion', 600, 900)" >Nuevo empleado</a>                        
                        {% endif %}
                    </div>
                    <div class="btn-group">
                        {% if arCapacitacion.estadoAutorizado == 0 %}
                            <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_capacitacion_detalle_nuevo', {'codigoCapacitacion': arCapacitacion.codigoCapacitacionPk }) }}', 'AgregarEmpleadoCapacitacion', 600, 900)" >Nuevo</a>
                        {% endif %}    
                    </div>
                    <div class="btn-group">
                        {{ form_widget(form.BtnActualizar, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}               
                    </div>
                    <div class="btn-group">
                        {{ form_widget(form.BtnEliminarDetalle, { 'attr': {'class': 'btn btn-danger btn-sm'} }) }}               
                    </div>                   
                </div>        
                <div class="btn-toolbar" style="float: left">
                    <div class="btn-group" style="float: left">
                        <div class="btn btn-default btn-sm">Asistentes <span class="badge">{{ arCapacitacionesDetalles.getTotalItemCount }}</span></div>                        
                    </div>
                    <div class="btn-group btn-sm" style="float: left;margin-left: 0px;padding-top: 0px;">
                        {{ knp_pagination_render(arCapacitacionesDetalles) }}       
                    </div>
                </div>       
                
            </div>    
            <div class="tab-pane" id="notas">
                <br />
                <table class="table table-striped table-bordered table-condensed">
                    <tr>
                        <th>CÓDIGO</th>
                        <th>NOTA</th>                                                
                        <th></th>
                    </tr>
                    {% for arCapacitacionesNotas in arCapacitacionesNotas %}
                        <tr>
                            <td><input type="hidden" name="LblCodigo[]" value="{{ arCapacitacionesNotas.codigoCapacitacionNotaPk }}">{{ arCapacitacionesNotas.codigoCapacitacionNotaPk }} </td>
                            <td>{{ arCapacitacionesNotas.nota }}</td>
                            <td><input type="checkbox" name="ChkSeleccionarNota[]" value="{{ arCapacitacionesNotas.codigoCapacitacionNotaPk }}" /></td>
                        </tr>
                    {% endfor %}
                </table>
                <div class="btn-toolbar" style="float: right">
                    <div class="btn-group">
                        {% if arCapacitacion.estadoAutorizado == 0 %}
                            <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_capacitacion_detalle_nuevo_nota', {'codigoCapacitacion': arCapacitacion.codigoCapacitacionPk }) }}', 'AgregarNota', 600, 900)" >Nuevo</a>                        
                        {% endif %}    
                    </div>                  
                    <div class="btn-group">
                        {{ form_widget(form.BtnEliminarNota, { 'attr': {'class': 'btn btn-danger btn-sm'} }) }}               
                    </div>                   
                </div>        
                
                {{ knp_pagination_render(arCapacitacionesDetalles) }}       
                
            </div>                 
        </div>
        
        <div class="btn-toolbar" style="float:left">
            <div class="btn-group">
                <a class="btn btn-default btn-sm" href="{{ path('brs_rhu_capacitacion_lista') }}" style="float:left">Volver</a>
            </div>
        </div>
        <br /><br />
        {{ form_rest(form) }}
        {{ form_end(form) }}
    </div>
{% endblock %}
