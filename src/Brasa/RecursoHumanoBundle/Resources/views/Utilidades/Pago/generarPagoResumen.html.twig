{% extends '::base.html.twig' %}
{% block content %}
<div class="container">
    <div class="page-header">
        <h3>Resumen programacion pago</h3>            
    </div>  
    <div class="btn-toolbar" style="float:left">
        <div class="btn-group">
            <a  class="btn btn-default" href="{{ path('brs_rhu_utilidades_pagos_generar_pago') }}">Volver</a>
            <a  class="btn btn-default" href="{{ path('brs_tte_guias_nuevo', { 'codigoGuia': 1 }) }}" {% if 1 == 1%} disabled {% endif %}>Editar</a>
            <!-- Split button -->
            <div class="btn-group">
                <button type="button" class="btn btn-default">Procesos</button>
                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                    <span class="caret"></span>

                </button>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="{{ path('brs_rhu_pagos_adicionales_detalle', { 'codigoCentroCosto': arCentroCosto.codigoCentroCostoPk }) }} " target="_blank">Agregar pagos, incapacidades</a></li>
                    <li><a href="{{ path('brs_rhu_pagos_adicionales_generarmasivo_detalle', { 'codigoCentroCosto': arCentroCosto.codigoCentroCostoPk }) }}" target="_blank">Generar pagos adicionales (Masivo)</a></li>
                    <li class="divider"></li>    
                    <li><a href="{{ path('brs_rhu_descuentos_adicionales_detalle', { 'codigoCentroCosto': arCentroCosto.codigoCentroCostoPk }) }}" target="_blank">Agregar descuentos, licencias</a></li>
                    <li><li><a href="{{ path('brs_rhu_descuentos_adicionales_generarmasivo_detalle', { 'codigoCentroCosto': arCentroCosto.codigoCentroCostoPk }) }}" target="_blank">Generar descuentos adicionales (Masivo)</a></li></li>                    
                </ul>
            </div>                    
        </div>
    </div>
    <br /><br /><br />     
    <div class="panel panel-default">
      <div class="panel-heading">Informacion centro costo</div>
      <div class="panel-body">
            <table width="100%" class="table table-condensed table-bordered">
                <tr>
                    <td class="td-label">Numero:</td>
                    <td class="td-in-well">{{ arCentroCosto.codigoCentroCostoPk }}</td>
                    <td class="td-label">Ultimo periodo:</td>
                    <td class="td-in-well">{{ arCentroCosto.fechaUltimoPagoProgramado |date("Y/m/d") }}</td>
                </tr>
                <tr>
                    <td class="td-label">Nombre:</td>
                    <td class="td-in-well">{{ arCentroCosto.nombre }}</td>
                    <td class="td-label"></td>
                    <td class="td-in-well"></td>
                </tr>
                <tr>
                    <td colspan="8">Comentarios:</td>
                </tr>
            </table>
      </div>
    </div>
                    
    <div class="panel panel-default">
      <div class="panel-heading">Pagos adicionales</div>
      <div class="panel-body">
        <table class="table table-striped table-bordered table-condensed">
            <tr>
                <th>ID</th>
                <th>NUMERO</th>
                <th>CONCEPTO</th>
                <th>EMPLEADO</th>
                <th>CANT</th>
                <th>VALOR</th>
                <th>PERMANENTE</th>
            </tr>
            {% for arPagosAdicionales in arPagosAdicionales %}
            <tr>
                <td>
                    <input type="hidden" name="LblCodigoGuia[]" value="{{ arPagosAdicionales.codigoPagoAdicionalPk }}">
                    <span class="badge">{{ arPagosAdicionales.codigoPagoAdicionalPk }}</span>
                </td>
                <td>{{ arPagosAdicionales.codigoPagoAdicionalPk}}</td>
                <td>{{ arPagosAdicionales.pagoConceptoRel.nombre }}</td>
                <td>{{ arPagosAdicionales.empleadoRel.nombreCorto }}</td>
                <td style="text-align: right">{{ arPagosAdicionales.cantidad | number_format(2, '.', ',') }}</td>                            
                <td style="text-align: right">{{ arPagosAdicionales.valor | number_format(2, '.', ',') }}</td>                                                                        
                <td>{% if arPagosAdicionales.permanente == 1 %} SI {% else %} NO {% endif %}</td>                                        
            </tr>
            {% endfor %}
        </table>
      </div>
    </div>  

    <div class="panel panel-default">
        <div class="panel-heading">Incapacidades</div>
        <div class="panel-body">
            <table class="table table-striped table-bordered table-condensed">
                <tr>
                    <th>ID</th>
                    <th>Fecha</th>
                    <th>Empleado</th>
                    <th>Dias</th>
                    <th>D. pendientes</th>                    
                </tr>
                {% for arIncapacidades in arIncapacidades %}
                <tr>
                    <td><input type="hidden" name="LblCodigo[]" value="{{ arIncapacidades.codigoIncapacidadPk }}">{{ arIncapacidades.codigoIncapacidadPk }} </td>
                    <td>{{ arIncapacidades.fecha |date("Y/m/d")  }}</td>
                    <td>{{ arIncapacidades.empleadoRel.nombreCorto  }}</td>
                    <td style="text-align: right">{{ arIncapacidades.cantidad | number_format(0, '.', ',') }}</td>
                    <td style="text-align: right">{{ arIncapacidades.cantidadPendiente | number_format(0, '.', ',') }}</td>                    
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>        

    <div class="panel panel-default">
      <div class="panel-heading">Descuentos adicionales</div>
      <div class="panel-body">
        <table class="table table-striped table-bordered table-condensed">
            <tr>
                <th>ID</th>
                <th>NUMERO</th>
                <th>CONCEPTO</th>
                <th>EMPLEADO</th>                
                <th>VALOR</th>
                <th>PERMANENTE</th>
            </tr>
            {% for arDescuentosAdicionales in arDescuentosAdicionales %}
            <tr>
                <td>
                    <input type="hidden" name="LblCodigo[]" value="{{ arDescuentosAdicionales.codigoDescuentoAdicionalPk }}">
                    <span class="badge">{{ arDescuentosAdicionales.codigoDescuentoAdicionalPk }}</span>
                </td>
                <td>{{ arDescuentosAdicionales.codigoDescuentoAdicionalPk}}</td>
                <td>{{ arDescuentosAdicionales.pagoConceptoRel.nombre }}</td>
                <td>{{ arDescuentosAdicionales.empleadoRel.nombreCorto }}</td>                
                <td style="text-align: right">{{ arDescuentosAdicionales.valor | number_format(2, '.', ',') }}</td>                                                                        
                <td>{% if arDescuentosAdicionales.permanente == 1 %} SI {% else %} NO {% endif %}</td>                                        
            </tr>
            {% endfor %}
        </table>
      </div>
    </div>
            
    <div class="panel panel-default">
        <div class="panel-heading">Licencias</div>
        <div class="panel-body">
            <table class="table table-striped table-bordered table-condensed">
                <tr>
                    <th>ID</th>
                    <th>Fecha</th>
                    <th>Empleado</th>
                    <th>Dias</th>
                    <th>D. pendientes</th>                    
                </tr>
                {% for arLicencias in arLicencias %}
                <tr>
                    <td><input type="hidden" name="LblCodigo[]" value="{{ arLicencias.codigoLicenciaPk }}">{{ arLicencias.codigoLicenciaPk }} </td>
                    <td>{{ arLicencias.fecha |date("Y/m/d")  }}</td>
                    <td>{{ arLicencias.empleadoRel.nombreCorto  }}</td>
                    <td style="text-align: right">{{ arLicencias.cantidad | number_format(1, '.', ',') }}</td>
                    <td style="text-align: right">{{ arLicencias.cantidadPendiente | number_format(1, '.', ',') }}</td>                    
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>            
            
    <div class="panel panel-default">
      <div class="panel-heading">Empleados</div>
      <div class="panel-body">
        <table class="table table-striped table-bordered table-condensed">
            <tr>
                <th>ID</th>
                <th>IDENTIFICACION</th>
                <th>NOMBRE</th>
                <th>SALARIO</th>   
                <th></th> 
            </tr>
            {% for arEmpleados in arEmpleados %}
            <tr {% if arEmpleados.estadoActivo == 0 %}class="danger"{% endif %}>
                <td>
                    <input type="hidden" name="LblCodigoGuia[]" value="{{ arEmpleados.codigoEmpleadoPk }}">
                    <span class="badge">{{ arEmpleados.codigoEmpleadoPk }}</span>
                </td>
                <td>{{ arEmpleados.numeroIdentificacion}}</td>
                <td>{{ arEmpleados.nombreCorto }}</td>                
                <td style="text-align: right">{{ arEmpleados.vrSalario | number_format(2, '.', ',') }}</td>                                            
                <td style="text-align: center"><a href="{{ path('brs_rhu_base_empleados_detalles', { 'codigoEmpleado': arEmpleados.codigoEmpleadoPk }) }}" target="_blank"><img src="{{ asset('imagenes/bootstrap/glyphicons_152_new_window.png') }}" width=22 height=22></a></td>                
            </tr>
            {% endfor %}
        </table>
        <a href="#" class="btn btn-default">Empleados <span class="badge">{{ arEmpleados.getTotalItemCount }}</span></a>
        
      </div>
    </div>
    <div class="btn-toolbar" style="float:left">
        <div class="btn-group">
            <a class="btn btn-default" href="{{ path('brs_rhu_utilidades_pagos_generar_pago') }}" style="float:left">Volver</a>
        </div>
    </div>
    <br /><br />

</div>
{% endblock %}
