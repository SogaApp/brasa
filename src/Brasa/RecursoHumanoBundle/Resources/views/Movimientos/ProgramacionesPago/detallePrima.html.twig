{% extends '::base.html.twig' %}
{% block title %}Programacion de pago resumen prima - Soga App{% endblock %}
{% block content %}
<div class="container">
    <div class="page-header">
        <h3>Resumen programación pago (Prima)</h3>
    </div>
    {{ form_start(form, { 'attr': {'class': 'form-horizontal', 'novalidate': 'novalidate'} }) }}
    {{ form_errors(form) }}

    <div class="btn-toolbar" style="float:left">
        <div class="btn-group">                   
            {{ form_widget(form.BtnGenerarEmpleados, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}
            <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_programaciones_pago_inconsistencias', { 'codigoProgramacionPago': arProgramacionPago.codigoProgramacionPagoPk }) }}', 'VerInconsistencias', 500, 700)" >Inconsistencias</a>                                    
            <!-- Split button -->
            <div class="btn-group">
                <button type="button" class="btn btn-default btn-sm">Utilidades</button>
                <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li><a href="{{ path('brs_rhu_pagos_adicionales_detalle', { 'codigoProgramacionPago': arProgramacionPago.codigoProgramacionPagoPk }) }} " target="_blank">Adicionales</a></li>
                    <li class="divider"></li>                    
                </ul>
            </div>
        </div>
    </div> <br /> <br /> <br /> 
    
    <div class="panel panel-default">
      <div class="panel-heading">Detalle programación de pago</div>
      <div class="panel-body">
            <table width="100%" class="table table-condensed table-bordered">
                <tr>
                    <td class="titulo">CÓDIGO:</td>
                    <td class="td-in-well">{{ arProgramacionPago.codigoProgramacionPagoPk }}</td>
                    <td class="titulo">INCONSISTENCIAS:</td>
                    <td> {% if arProgramacionPago.inconsistencias == 0 %} NO {% else %} SI {% endif %} </td>                   
                </tr>
                <tr>
                    <td class="titulo">GRUPO PAGO:</td>
                    <td class="td-in-well">{{ arProgramacionPago.codigoCentroCostoFk }} - {{ arCentroCosto.nombre }}</td>
                    <td class="titulo"></td>
                    <td class="td-in-well"></td>                    
                </tr>
                <tr>
                    <td class="titulo">PERIODO DESDE:</td>
                    <td class="td-in-well">{{ arProgramacionPago.fechaDesde |date("Y/m/d") }}</td>                    
                    <td class="titulo"></td>
                    <td class="td-in-well"></td>                   
                </tr>                
                <tr>
                    <td class="titulo">PERIODO HASTA:</td>
                    <td class="td-in-well">{{ arProgramacionPago.fechaHasta |date("Y/m/d") }}</td>
                    <td class="titulo">NETO A PAGAR:</th>
                    <td class="td-in-well" align="right">{{ arProgramacionPago.vrNeto | number_format(2, '.', ',')}}</td>                                                                                           
                </tr>                
                <tr>
                    <td colspan="8" class="titulo">COMENTARIOS:</td>
                </tr>
            </table>
      </div>
    </div>                                      

    <div class="panel panel-default">
      <div class="panel-heading">Empleados</div>
      <div class="panel-body">
        <table class="table table-striped table-bordered table-condensed">
            <tr>
                <th>ID</th>
                <th>CÓDIGO</th>
                <th>IDENTIFICACIÓN</th>
                <th>NOMBRE</th>
                <th>P. DESDE</th>
                <th>DESDE</th>
                <th>HASTA</th>
                <th>SALARIO</th>
                <th>DEVENGADO</th>
                <th>DEDUCCIONES</th>
                <th>NETO</th>
                <th>DÍAS</th>
                <th></th>
                <th></th>
            </tr>
            {% for arProgramacionPagoDetalles in arProgramacionPagoDetalles %}
            <tr>
                <td>
                    <input type="hidden" name="LblCodigoDetalle[]" value="{{ arProgramacionPagoDetalles.codigoProgramacionPagoDetallePk }}">
                    <span class="badge">{{ arProgramacionPagoDetalles.codigoProgramacionPagoDetallePk }}</span>
                </td>
                <td>{{ arProgramacionPagoDetalles.codigoEmpleadoFk}}</td>
                <td>{{ arProgramacionPagoDetalles.empleadoRel.numeroIdentificacion}}</td>
                <td>{{ arProgramacionPagoDetalles.empleadoRel.nombreCorto }}</td>
                <td>{{ arProgramacionPagoDetalles.fechaDesdePago |date("Y/m/d")  }}</td>
                <td>{{ arProgramacionPagoDetalles.fechaDesde |date("Y/m/d")  }}</td>
                <td>{{ arProgramacionPagoDetalles.fechaHasta |date("Y/m/d")  }}</td>
                <td style="text-align: right">{{ arProgramacionPagoDetalles.vrSalario | number_format(2, '.', ',') }}</td>
                <td style="text-align: right">{{ arProgramacionPagoDetalles.vrDevengado | number_format(2, '.', ',') }}</td>
                <td style="text-align: right">{{ arProgramacionPagoDetalles.vrDeducciones | number_format(2, '.', ',') }}</td>
                <td style="text-align: right">{{ arProgramacionPagoDetalles.vrNetoPagar | number_format(2, '.', ',') }}</td>
                <td style="text-align: right">{{ arProgramacionPagoDetalles.dias | number_format(0, '.', ',') }}</td>               
                <td style="text-align: center"><a href="{{ path('brs_rhu_base_empleados_detalles', { 'codigoEmpleado': arProgramacionPagoDetalles.codigoEmpleadoFk }) }}" target="_blank"><img src="{{ asset('imagenes/bootstrap/glyphicons_152_new_window.png') }}" width=22 height=22></a></td>
                <td><input type="checkbox" name="ChkSeleccionarEmpleado[]" value="{{ arProgramacionPagoDetalles.codigoProgramacionPagoDetallePk }}" /></td>
            </tr>
            {% endfor %}
        </table>
        <!-- Botones Menu Items -->
        <div class="btn-toolbar" style="float: left">
            <div class="btn-group" style="float: left">
                <div class="btn btn-default btn-sm">Programación pago detalles <span class="badge">{{ arProgramacionPagoDetalles.getTotalItemCount }}</span></div>                        
            </div>
            <div class="btn-group btn-sm" style="float: left;margin-left: 0px;padding-top: 0px;">
                {{ knp_pagination_render(arProgramacionPagoDetalles) }}       
            </div>
        </div>
        <div class="btn-toolbar" style="float: right">
            <div class="btn-group">                
                <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_programaciones_pago_agregar_empleado', {'codigoProgramacionPago': arProgramacionPago.codigoProgramacionPagoPk }) }}', 'AgregarEmpleado', 600, 900)" >Agregar</a>
            </div>
        </div>

      </div>
    </div>
    <div class="btn-toolbar" style="float:left">
        <div class="btn-group">
            <a class="btn btn-default btn-sm" href="{{ path('brs_rhu_programaciones_pago_lista') }}" style="float:left">Volver</a>
        </div>
    </div>
    <br /><br />
    {{ form_rest(form) }}
    {{ form_end(form) }}
</div>
{% endblock %}
