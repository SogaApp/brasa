{% extends '::base.html.twig' %}
{% block title %}Pago banco detalle - Soga App{% endblock %}
{% block content %}
    <script>
        $('#myTab a').click(function (e) {
            e.preventDefault();
            $(this).tab('show');
        })
    </script>
    <div class="container">
        <div class="page-header">
            <h3>Detalle pago banco</h3>
        </div>
        {{ form_start(form, { 'attr': {'class': 'form-horizontal', 'novalidate': 'novalidate'} }) }}
        {{ form_errors(form) }}
        <div class="btn-toolbar" style="float:left">
            <div class="btn-group">                
                {{ form_widget(form.BtnAutorizar, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}                                                
                {{ form_widget(form.BtnDesAutorizar, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}                                                
                {{ form_widget(form.BtnImprimir, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}                                                                
                <div class="btn-group">
                    <button type="button" class="btn btn-default btn-sm">Archivo banco</button>
                    <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li class="dropdown-submenu">{{ form_widget(form.BtnArchivoBancolombiaPab, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}</li>
                        <li class="dropdown-submenu">{{ form_widget(form.BtnArchivoBancolombiaSap, { 'attr': {'class': 'btn btn-default btn-sm'} }) }}</li>
                    </ul>
                </div> 
                <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_ad_archivos_lista', { 'codigoDocumento': 7,  'numero': arPagoBanco.codigoPagoBancoPK }) }}', 'Archivos', 500, 700)" >Archivos</a>                    
            </div>
        </div>

        <br /><br />
        <!-- Encabezado Movimiento -->
        <div class="panel panel-default">
            <div class="panel-heading">Información pago banco</div>
            <div class="panel-body">
                <table width="100%" class="table table-condensed table-bordered">
                    <tr>
                        <td class="titulo">CÓDIGO:</td>
                        <td class="td-in-well">{{ arPagoBanco.codigoPagoBancoPK}}</td>
                        <td class="titulo"></td>
                        <td class="td-in-well"></td>
                    </tr>
                    <tr>
                        <td class="titulo">CUENTA:</td>
                        <td class="td-in-well">{{ arPagoBanco.cuentaRel.nombre }}</td>
                        <td class="titulo">BANCO:</td>
                        <td class="td-in-well">{{ arPagoBanco.cuentaRel.bancoRel.nombre }}</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td class="titulo" >REGISTROS:</td>
                        <td align="right">{{ arPagoBanco.numeroRegistros | number_format(0, '.', ',')}}</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td></td>
                        <td class="titulo" >TOTAL:</td>
                        <td align="right">{{ arPagoBanco.vrTotalPago | number_format(0, '.', ',')}}</td>
                    </tr>                    
                </table>
            </div>
        </div>

        <!-- Fin Encabezado Movimiento -->
        
        <ul class="nav nav-tabs">
            <li class="active"><a href="#pagos" data-toggle="tab">Pagos</a></li>
        </ul>

        <div class="tab-content">
            <div class="tab-pane active" id="pagos">
                <!-- Menu Encabezado Movimiento -->
                <div id="examenes" style="width: 100%"><br>
                    <table class="table table-striped table-bordered table-condensed">
                        <tr>
                            <th>CÓDIGO</th>
                            <th>PAGO</th>
                            <th>NUMERO</th>
                            <th>IDENTIFICACION</th>
                            <th>EMPLEADO</th>
                            <th>CUENTA</th>
                            <th style="text-align: right">VR. PAGO</th>                
                            <th><input type="checkbox" name="ChkSeleccionarTodos" OnClick="ChequearTodos(this);"/></th>
                        </tr>
                        {% for arPagoBancoDetalle in arPagoBancoDetalle %}
                            {% if arPagoBancoDetalle.cuenta == null %}{% set class = 'danger' %}{% else %}{% set class = '' %}{% endif %}    
                            <tr class="{{ class }}">
                                <td>{{ arPagoBancoDetalle.codigoPagoBancoDetallePk  }}</td>
                                <td>{{ arPagoBancoDetalle.codigoPagoFk  }}</td>
                                <td>{{ arPagoBancoDetalle.pagoRel.numero  }}</td>
                                <td>{{ arPagoBancoDetalle.numeroIdentificacion  }}</td>
                                <td>{{ arPagoBancoDetalle.nombreCorto  }}</td>
                                <td>{{ arPagoBancoDetalle.cuenta  }}</td>
                                <td class="td-in-well" align="right">{{ arPagoBancoDetalle.vrPago | number_format(2, '.', ',') }}</td>
                                <td><input type="checkbox" name="ChkSeleccionar[]" value="{{ arPagoBancoDetalle.codigoPagoBancoDetallePk }}" /></td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
            <div class="btn-toolbar" style="float: right">              
                {%if arPagoBanco.estadoAutorizado == 0 %}
                <div class="btn-group">
                    <a class="btn btn-default btn-sm" href="javascript:abrirVentana3('{{ path('brs_rhu_pago_banco_detalle_nuevo', {'codigoPagoBanco': arPagoBanco.codigoPagoBancoPK}) }}', 'AgregarPagoBancoDetalle', 600, 900)">Nuevo</a>
                </div>
                {% endif %}
                <div class="btn-group">
                    {{ form_widget(form.BtnEliminarDetalle, { 'attr': {'class': 'btn btn-danger btn-sm'} }) }}               
                </div>
            </div> 
        </div>            


        {{ form_rest(form) }}
        {{ form_end(form) }}
        <a  class="btn btn-default btn-sm" href="{{ path('brs_rhu_pago_banco_lista') }}">Volver</a>
    </div>
{% endblock %}
