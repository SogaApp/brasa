<?php

namespace Brasa\TransporteBundle\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * MovimientosRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class TteConfiguracionesRepository extends EntityRepository {
    public function consecutivoGuia() {        
        $em = $this->getEntityManager();
        $arConfiguracion = new \Brasa\TransporteBundle\Entity\TteConfiguraciones();
        $arConfiguracion = $em->getRepository('BrasaTransporteBundle:TteConfiguraciones')->find(1);
        $intConsecutivo = $arConfiguracion->getConsecutivoGuias();
        $arConfiguracion->setConsecutivoGuias($arConfiguracion->getConsecutivoGuias() + 1);        
        $em->persist($arConfiguracion);
        $em->flush();
        return $intConsecutivo;
    }    
    public function consecutivoDespacho() {        
        $em = $this->getEntityManager();
        $arEntidad = new \Brasa\GeneralBundle\Entity\GenEntidades();
        $arEntidad = $em->getRepository('BrasaGeneralBundle:GenEntidades')->find($codigoEntidad);
        $intConsecutivo = $arEntidad->getTteConsecutivoDespachos();
        $arEntidad->setTteConsecutivoDespachos($arEntidad->getTteConsecutivoDespachos() + 1);        
        $em->persist($arEntidad);
        $em->flush();
        return $intConsecutivo;
    }  
}